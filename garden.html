<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The Meadow</title>
    <style>
        body { margin: 0; padding: 0; background: #fafafa; overflow: hidden; font-family: 'Helvetica Neue', sans-serif; cursor: crosshair; }
        
        /* The Drawing Surface */
        #meadowCanvas { position: absolute; top: 0; left: 0; z-index: 1; }

        .ui {
            position: fixed; top: 40px; width: 100%; text-align: center;
            z-index: 10; pointer-events: none;
            text-transform: uppercase; letter-spacing: 5px; color: #555; font-size: 0.8rem;
        }

        .btn-minimal {
            position: fixed; bottom: 40px; left: 50%; transform: translateX(-50%);
            padding: 15px 40px; background: #fff; border: 1px solid #333;
            color: #333; letter-spacing: 3px; font-size: 0.7rem; cursor: pointer;
            transition: 0.3s; z-index: 20; text-transform: uppercase;
        }
        .btn-minimal:hover { background: #333; color: #fff; }
    </style>
</head>
<body>

    <div class="ui"><h1>Tap to grow a garden for Arshiya</h1></div>
    <canvas id="meadowCanvas"></canvas>
    <button class="btn-minimal" onclick="window.location.href='bouquet.html'">Continue</button>

    <audio id="bg-music" loop><source src="yellow.mp3" type="audio/mpeg"></audio>

    <script>
        const canvas = document.getElementById('meadowCanvas');
        const ctx = canvas.getContext('2d');
        const flowers = ['ðŸŒ»', 'ðŸŒ¸', 'ðŸŒ·', 'ðŸŒ¼', 'ðŸŒº'];

        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.onresize = resize;
        resize();

        function plantFlower(e) {
            // Get mouse/touch coordinates
            const x = e.clientX || (e.touches ? e.touches[0].clientX : 0);
            const y = e.clientY || (e.touches ? e.touches[0].clientY : 0);
            
            if (y > window.innerHeight - 100) return; // Prevent planting over button

            const flower = flowers[Math.floor(Math.random() * flowers.length)];
            const stemHeight = window.innerHeight - y;

            growFlower(x, window.innerHeight, y, flower);
        }

        function growFlower(x, startY, endY, emoji) {
            let currentY = startY;
            const speed = 8;

            function animate() {
                if (currentY > endY) {
                    // Draw the green stem
                    ctx.strokeStyle = '#8bc34a';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(x, currentY);
                    ctx.lineTo(x, currentY - speed);
                    ctx.stroke();

                    currentY -= speed;
                    requestAnimationFrame(animate);
                } else {
                    // Draw the flower head once stem is done
                    ctx.font = '30px serif';
                    ctx.textAlign = 'center';
                    ctx.fillText(emoji, x, endY);
                }
            }
            animate();
        }

        window.addEventListener('mousedown', plantFlower);
        window.addEventListener('touchstart', (e) => { e.preventDefault(); plantFlower(e); });

        // Music
        const audio = document.getElementById('bg-music');
        if (sessionStorage.getItem('musicPlaying') === 'true') audio.play();
    </script>
</body>
</html>
